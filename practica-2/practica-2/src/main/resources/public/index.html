<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Estudiantes</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<div class="container">
    <h2>Listado de Estudiantes</h2>

    <!-- Bot√≥n para agregar un nuevo estudiante -->
    <a href="nuevo.html" class="button blue-btn">‚ûï Nuevo Estudiante</a>

    <table id="tabla-estudiantes">
        <tr>
            <th>Matr√≠cula</th><th>Nombre</th><th>Apellido</th><th>Tel√©fono</th><th>Acciones</th>
        </tr>
    </table>
</div>

<script>
    function cargarEstudiantes() {
        fetch('/estudiantes/listar')
            .then(response => response.json())
            .then(data => {
                let tabla = document.getElementById("tabla-estudiantes");
                tabla.innerHTML = `<tr>
                        <th>Matr√≠cula</th><th>Nombre</th><th>Apellido</th><th>Tel√©fono</th><th>Acciones</th>
                    </tr>`;  // Reiniciar la tabla

                data.forEach(estudiante => {
                    let fila = tabla.insertRow();
                    fila.innerHTML = `
                            <td>${estudiante.matricula}</td>
                            <td>${estudiante.nombre}</td>
                            <td>${estudiante.apellido}</td>
                            <td>${estudiante.telefono}</td>
                            <td>
                                <!-- Bot√≥n Editar en Azul -->
                                <a href="editar.html?matricula=${estudiante.matricula}&nombre=${estudiante.nombre}&apellido=${estudiante.apellido}&telefono=${estudiante.telefono}" class="button blue-btn">‚úè Editar</a>

                                <!-- Bot√≥n Eliminar en Rojo -->
                                <form action="/estudiantes/eliminar" method="post" style="display:inline;">
                                    <input type="hidden" name="matricula" value="${estudiante.matricula}">
                                    <button type="submit" class="button red-btn">üóë Eliminar</button>
                                </form>
                            </td>
                        `;
                });
            })
            .catch(error => console.error("Error cargando estudiantes:", error));
    }

    cargarEstudiantes();
</script>
</body>
</html>
