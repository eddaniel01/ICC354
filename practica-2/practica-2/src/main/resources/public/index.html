<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Lista de Estudiantes</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
<h2>Listado de Estudiantes</h2>
<table id="tabla-estudiantes">
    <tr>
        <th>Matrícula</th><th>Nombre</th><th>Apellido</th><th>Teléfono</th><th>Acciones</th>
    </tr>
</table>
<a href="nuevo.html">Nuevo Estudiante</a>

<script>
    function cargarEstudiantes() {
        fetch('/estudiantes/listar')
            .then(response => response.json())
            .then(data => {
                let tabla = document.getElementById("tabla-estudiantes");
                data.forEach(estudiante => {
                    let fila = tabla.insertRow();
                    fila.innerHTML = `
                            <td>${estudiante.matricula}</td>
                            <td>${estudiante.nombre}</td>
                            <td>${estudiante.apellido}</td>
                            <td>${estudiante.telefono}</td>
                            <td>
                                <a href="editar.html?matricula=${estudiante.matricula}&nombre=${estudiante.nombre}&apellido=${estudiante.apellido}&telefono=${estudiante.telefono}">Editar</a>
                                <form action="/estudiantes/eliminar" method="post" style="display:inline;">
                                    <input type="hidden" name="matricula" value="${estudiante.matricula}">
                                    <button type="submit">Eliminar</button>
                                </form>
                            </td>
                        `;
                });
            })
            .catch(error => console.error("Error cargando estudiantes:", error));
    }

    // Llamar la función cuando se cargue la página
    cargarEstudiantes();
</script>
</body>
</html>
